[{"_1":2},"routes/package",{"_3":4},"data",{"_5":6,"_41":42,"_43":44},"package",{"_7":8,"_9":10,"_11":12,"_13":14,"_15":16,"_17":18,"_19":20,"_21":22,"_27":28,"_29":30,"_39":40},"name","timezone-date","author","Stephen Meech","description","A package that uses Python scripts to offer a choice from the full set of worldwide timezones, returning the current date and time there.","title","Timezone Date","version","0.1.0","archive_url","https://github.com/espanso/hub/releases/latest/download/timezone-date-0.1.0.zip","archive_sha256_url","https://github.com/espanso/hub/releases/latest/download/timezone-date-0.1.0-sha256.txt","tags",[23,24,25,26],"time","date","timezone","python","id","timezone-date-0.1.0","files",{"_31":32,"_33":34,"_35":36,"_37":38},"_package.yml","# yaml-language-server: $schema=https://raw.githubusercontent.com/espanso/espanso/dev/schemas/match.schema.json\n\n# This version will work on newer (v3.9+) versions of Python\n# and is probably faster than the one which relies on `pytz`\n\n# To use it, rename this file, without the underscore `_` prefix\n# and rename the other WITH an underscore prefix.\n\n# Amend the `default: Europe/London` line 32 to suit yourself\n\nmatches:\n  - trigger: :tzdate\n    replace: '{{output}}'\n    vars:\n      - name: zones\n        type: script\n        params:\n          args:\n            - python\n            - -c\n            - |\n              from zoneinfo import available_timezones\n              print(\"\\n\".join(sorted(available_timezones())))\n      - name: zone_choice\n        type: form\n        params:\n          layout: 'Pick a time-zone: [[zone]]'\n          fields:\n            zone:\n              type: list\n              values: '{{zones}}'\n              default: Europe/London # Change this to a timezone that suits you\n      - name: output\n        type: script\n        params:\n          args:\n            - python\n            - -c\n            - |\n              from datetime import datetime; from zoneinfo import ZoneInfo\n              timezone = ZoneInfo('{{zone_choice.zone}}')\n              # Get the current UTC time\n              utc_now = datetime.utcnow()\n              # Convert UTC time to the specified timezone\n              local_time = utc_now.astimezone(timezone)\n              print(\"Current date and time in\", timezone, \"is:\", local_time.strftime('%F %T'))\n","README.md","# Timezone Date\n\nA single trigger that uses two Python scripts to offer a choice from the full set of worldwide timezones, returning the current date and time there.\n\n(Espanso's inbuilt `date` extension is handy, but very limited, especially because it can't accept a `{{variable}}` for its `offset:` value. I'll publish another small package `date-offset` to illustrate other ways in which this can be done.)\n\nTwo versions of the match file are included:\n\n1. `package.yml` uses the `pytz` library and should work with any version of Python\n2. `_package.yml` uses `zoneinfo`, which is part of modern editions (v3.9+) of Python, and should be a few milliseconds faster\n\nTo try the latter, rename the first file to anything you like, with an underscore `_` as its first character so that Espanso ignores it, then *remove* the underscore prefixing the second file's name.\n\nIn the middle of each file is a `default:` line, currently:\n\n```yml\n              default: Europe/London\n```\n\nOnce you've tried the trigger, change this timezone value to take you quickly to a part of the list that suits you most - it's a long list!\n\nThere is scope to modify the code to:\n\n- in the last line, change the text, and date format output\n- hard-code a timezone into the third variable (if you only need one, for example),  dispensing with the first two variables providing the choice\n- include some sort of time offset (do so in the final section but *prior* to the conversion of UTC time to the specified timezone) - see also the `date-offset` package\n\nStephen Meech\n(@smeech)\n","package.yml","# yaml-language-server: $schema=https://raw.githubusercontent.com/espanso/espanso/dev/schemas/match.schema.json\n\n# This version should work on most versions of Python\n# but may be slower than the one which uses `zoneinfo`\n\n# Amend the `default: Europe/London` line 29 to your convenience\n\nmatches:\n  - trigger: :tzdate\n    replace: '{{output}}'\n    vars:\n      - name: zones\n        type: script\n        params:\n          args:\n            - python\n            - -c\n            - |\n              import pytz\n              print(\"\\n\".join(pytz.all_timezones))\n      - name: zone_choice\n        type: form\n        params:\n          layout: 'Pick a time-zone: [[zone]]'\n          fields:\n            zone:\n              type: list\n              values: '{{zones}}'\n              default: Europe/London # Change this to a timezone that suits you\n      - name: output\n        type: script\n        params:\n          args:\n            - python\n            - -c\n            - |\n              import pytz; from datetime import datetime\n              timezone = pytz.timezone('{{zone_choice.zone}}')\n              # Get the current date and time in UTC\n              utc_now = datetime.utcnow().replace(tzinfo=pytz.utc)\n              # Convert UTC time to the specified timezone\n              local_time = utc_now.astimezone(timezone)\n              print(\"Current date and time in\", timezone, \"is:\", local_time.strftime('%F %T'))","_manifest.yml","name: \"timezone-date\"\ntitle: \"Timezone Date\"\ndescription: A package that uses Python scripts to offer a choice from the full set of worldwide timezones, returning the current date and time there.\nhomepage: \"https://github.com/smeech\"\nversion: 0.1.0\nauthor: Stephen Meech\ntags: [time, date, timezone, python]\n","repositoryHome","https://github.com/smeech","versions",[16],"isLatest",true]
