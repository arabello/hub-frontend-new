[{"_1":2},"routes/package",{"_3":4},"data",{"_5":6,"_45":46,"_47":48},"package",{"_7":8,"_9":10,"_11":12,"_13":14,"_15":16,"_17":18,"_19":20,"_21":22,"_25":26,"_27":28,"_43":44},"name","good-morning","author","Joshua Reeves","description","Uses python to create personalized greetings that look like they were manually typed","title","Good Morning","version","0.1.0","archive_url","https://github.com/espanso/hub/releases/latest/download/good-morning-0.1.0.zip","archive_sha256_url","https://github.com/espanso/hub/releases/latest/download/good-morning-0.1.0-sha256.txt","tags",[23,24],"greetings","python","id","good-morning-0.1.0","files",{"_29":30,"_31":32,"_33":34,"_35":36,"_37":38,"_39":40,"_41":42},"README.md","# Good Morning\n*A simple python-powered match that creates personalized greetings that look like they were manually typed.*\n\n## Summary\nEach time the **:morning** match is called the script will generate a list of greetings for each name in the names.txt file. Names that include the tag character from the script (:) will be prioritized in the order they appear. Other names will be added to the list in a semi-random order.\n\nA random greeting will then be appended to the output depending on the day of the week.\n\nA good morning GIF file can also be optionally downloaded to the resources folder, which can then be output with the **:img-morning** match.\n\n## Matches\n* **:morning** - Generates a semi-random list of good morning greetings.\n\n* **:img-morning** - Outputs a random morning themed GIF **that is optionally downloaded when the :morning is called**.\n\n## Configuration\nThe script and configuration files are located in the resources folder:\n* **names.txt** - Contains the list of names that will be included in the final message.\n\n* **config.json** - Contains script configuration options:\n    * **downloadImage** - Determines whether or not to download an image from the configured repository. Default value is false.\n    * **repo** - Repository to download image from in the format of {owner}/{repositor}\n    * **path** - Image folder path within specified repository (e.g files/images)\n    * **branch** - Branch of specified repository\n    * **personalGreetings** - Greetings that will be used on each line (e.g. Hello, Good morning, etc.)\n    * **weekdayGreetings** - Greetings that will be used on each weekday unless otherwise specified.\n    * **mondayGreetings** - Greetings that will be used on Mondays.\n    * **fridayGreetings** - Greetings that will be used on Frindays.\n\nGreetings for each category can be added to the arrays their respective fields.\n\nFor security reasons, downloading images is disabled by default. In order to enable this functionality, the following must be configured:\n* downloadImage must be set to **true**.\n* repo must be configured with the owner and repository portions of the **GitHub repository url from which you would like to download images**.\n* If the images reside in a subdirectory of the repository, the path must be specified with the path option.\n* If the images reside in a specific branch of the repository, the branch must be specified by name via the branch option.\n\n*For convenience, an example configuration with image downloading enabled has been provided via the example-config.json file.*\n\n## Example\nGood morning, Tom!<br>\nGood morning, Katelyn!<br>\nGood morning, Fred!<br>\nGood morning, Anna!<br>\nGood morning, Andrew!<br>\nGood morning, Mary!<br>\nGood morning, Bob!<br>\nGood morning, Ted!<br>\n\nIt's going to be a great day!","_manifest.yml","name: \"good-morning\"\ntitle: \"Good Morning\"\ndescription: Uses python to create personalized greetings that look like they were manually typed\nhomepage: \"https://github.com/josh-reeves/espanso-hub/tree/main/packages/good-morning/0.1.0\"\nversion: 0.1.0\nauthor: Joshua Reeves\ntags: [\"greetings\", \"python\"]\n","package.yml","matches:\n  - trigger: \":img-morning\"\n    image_path: \"$CONFIG/match/packages/good-morning/resources/tmp.gif\"\n\n  - trigger: \":morning\"\n    replace: \"{{output}}\"\n    vars:\n      - name: output\n        type: script\n        params:\n          args:\n            - python\n            - \"%CONFIG%/match/packages/good-morning/resources/good_morning.py\"","resources/config.json","{\n    \"tagChar\": \":\",\n    \"downloadImage\": false,\n    \"repo\": \"{owner}/{repository}\",\n    \"path\": \"\",\n    \"branch\": \"\",\n    \"personalGreetings\": \n    [\n        \"Good morning,\"\n    ],\n    \"weekdayGreetings\": \n    [\n        \"It's going to be a great day!\"\n    ],\n    \"mondayGreetings\": \n    [\n        \"It's going to be a great week!\",\n        \"Hope you all had a great weekend!\",\n        \"How was everyone's weekend?\"\n    ],\n    \"fridayGreetings\": \n    [\n        \"We made it!\",\n        \"It's Friday!\",\n        \"Happy Friday!\",\n        \"One more day and we're done for the week!\"\n    ]\n\n}","resources/names.txt","ï»¿:test 1\n:test 2\n:test 3\n:test 4\n:test 5\ntest 6\ntest 7\ntest 8\ntest 9\ntest 10\ntest 11\ntest 12\ntest 13\ntest 14\ntest 15\ntest 16\ntest 17\ntest 18\ntest 19\ntest 20","resources/example-config.json","{\n    \"tagChar\": \":\",\n    \"downloadImage\": true,\n    \"repo\": \"josh-reeves/good-morning-espanso-package\",\n    \"path\": \"images\",\n    \"branch\": \"\",\n    \"personalGreetings\": \n    [\n        \"Good morning,\"\n    ],\n    \"weekdayGreetings\": \n    [\n        \"It's going to be a great day!\"\n    ],\n    \"mondayGreetings\": \n    [\n        \"It's going to be a great week!\",\n        \"Hope you all had a great weekend!\",\n        \"How was everyone's weekend?\"\n    ],\n    \"fridayGreetings\": \n    [\n        \"We made it!\",\n        \"It's Friday!\",\n        \"Happy Friday!\",\n        \"One more day and we're done for the week!\"\n    ]\n\n}","resources/good_morning.py","import random\nimport datetime\nimport os\nimport subprocess\nimport json\n\n# region Dependency Definitions\nclass Node:\n    data = None\n    next = None\n\n    def __init__(self, data):\n        self.data = data\n\nclass LinkedList:\n    head: Node = None\n    tail: Node = None\n\n    def __init__(self):\n        self.head: Node = None\n        self.tail: Node = None\n\n    def __iter__(self):\n        return LinkedListIterator(self)\n    \n    def __add__(self, other):\n        result: LinkedList = LinkedList()\n        result.appendNode(self.head)\n        result.appendNode(other.head)\n        \n        return result\n\n    def prepend(self, value):\n        self.prependNode(Node(value))\n\n        return\n\n    def prependNode(self, node: Node):\n        temp: Node = self.head\n        self.head = node\n        self.head.next = temp\n\n        if (self.tail is None):        \n            self.tail = self.head\n\n        while (self.tail.next is not None):\n            self.tail = self.tail.next\n\n        return\n\n    def append(self, value):\n        self.appendNode(Node(value))\n\n        return\n\n    def appendNode(self, node: Node):\n        if (self.head is None):\n            self.head = node\n            self.tail = self.head\n\n            while (self.tail.next is not None):\n                self.tail = self.tail.next\n  \n            return\n        \n        if (self.tail is None):\n            self.tail = self.head\n\n        while (self.tail.next is not None):\n            self.tail = self.tail.next\n\n        self.tail.next = node\n        self.tail = self.tail.next\n\n        return\n\nclass LinkedListIterator:\n    iterator: Node = None\n\n    def __init__(self, list: LinkedList):\n        self.iterator = list.head\n\n    def __next__(self):\n        if (self.iterator is None):\n            raise StopIteration\n\n        item = self.iterator.data\n        \n        self.iterator = self.iterator.next\n\n        return item\n    \n# endregion\n\n# region Main Program\nconfig = json.loads(open(file=os.path.join(os.path.dirname(__file__), \"config.json\"), encoding=\"utf-8-sig\").read())\n\ntagChar: str = config[\"tagChar\"]\n\ntagged: LinkedList = LinkedList()\nshuffle: LinkedList = LinkedList()\n\n# For each name in the names file, check to see if the name includes tagChr. If the name is tagged, add it to the tagged list in the \n# order it appears in the original file. Otherwise, either append or prepend the name to the shuffle list depending on whether a \n# random value between 0 and 99 is even or odd. This builds the list in a semi-random order and prevents the need to shuffle the \n# values later on:\nfor name in open(file=os.path.join(os.path.dirname(__file__), \"names.txt\"), encoding=\"utf-8-sig\"):\n    if (name.__contains__(tagChar)):\n        tagged.append(name[name.index(tagChar)+ 1:].rstrip())\n    elif (random.randint(0, 99) % 2 == 0):\n        shuffle.append(name.rstrip())\n    else:\n        shuffle.prepend(name.rstrip())\n\npersonalGreetings = config[\"personalGreetings\"]\nweekdayGreetings = config[\"weekdayGreetings\"]\nmondayGreetings = config[\"mondayGreetings\"]\nfridayGreetings = config[\"fridayGreetings\"]\n\nfor name in (tagged + shuffle):\n    print(f\"{personalGreetings[random.randint(0, personalGreetings.__len__() - 1)]} {name}!\")\n\nif (datetime.date.today().weekday() == 0):\n    print(f\"\\n{mondayGreetings[random.randint(0, mondayGreetings.__len__() - 1)]}\")\nelif (datetime.date.today().weekday() == 4):\n    print(f\"\\n{fridayGreetings[random.randint(0, fridayGreetings.__len__() - 1)]}\")    \nelse:\n    print(f\"\\n{weekdayGreetings[0]}\")\n\nif (config[\"downloadImage\"]):\n    # Uses GitHub API to pull list of images in gif directory of repository. This can be used to dynamically obtain the total number of \n    # images in the directory later:\n    try:\n        listURL =  \"https://api.github.com/repos/\" + config['repo'] + \"/contents\" + f\"/{config['path']}\" if config['path'] != \"\" else \"\" + f\"?ref={config['branch']}\" if config['branch'] != \"\" else \"\"\n        gifList = json.loads(subprocess.run([\"curl\", \"-s\", listURL, \"--ssl-no-revoke\", \"-H\", \"Accept: application/json\"], capture_output=True).stdout.decode())\n    \n    except Exception as ex:\n        print(f\"Failed to download list of repository content. Check \\\"repo\\\" and \\\"path\\\" values in config.json:\\n{ex}\")\n\n    # Attempt to curl a random gif from the gif directory\n    try:\n        downloadURL = gifList[random.randint(1, gifList.__len__() - 1)][\"download_url\"] \n        subprocess.run([\"curl\", \"-s\", downloadURL, \"--ssl-no-revoke\", \"-H\", \"Accept: image/*\",\"-o\", os.path.join(os.path.dirname(__file__), \"tmp.gif\")])\n\n    except Exception as ex:\n        print(f\"Failed to download GIF image:\\n{ex}\")\n\n# endregion","repositoryHome","https://github.com/josh-reeves/espanso-hub/tree/main/packages/good-morning/0.1.0","versions",[16],"isLatest",true]
